- content_for :header_tags do
  = render_initial_state

- content_for :content do
  .admin-wrapper
    .sidebar-wrapper
      .sidebar-wrapper__inner
        .sidebar
          = link_to root_path do
            = render_logo

          .sidebar__toggle
            .sidebar__toggle__logo
              = link_to root_path do
                = logo_as_symbol(:wordmark)

            = link_to '#', class: 'sidebar__toggle__icon', 'aria-label': t('navigation.toggle_menu'), 'aria-expanded': 'false' do
              = fa_icon 'bars'
              = fa_icon 'times'

          = render_navigation

    .content-wrapper
      .content
        .content__heading
          - if content_for?(:heading)
            = yield :heading
          - else
            .content__heading__row
              %h2= yield :page_title

              - if content_for?(:heading_actions)
                .content__heading__actions
                  = yield :heading_actions

        = render 'application/flashes'

        = yield

    .sidebar-wrapper.sidebar-wrapper--empty

:javascript
  const localSettingsJSON = localStorage.getItem('mastodon-settings');
  var theme = (localSettingsJSON !== null) ? (JSON.parse(localSettingsJSON).theme ?? 'auto') : 'auto';
  const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
  if (((prefersLight === true) && (theme === 'auto')) || (theme === 'light')) {
    document.body.classList.toggle('light-theme', true);
  }
  else if (((prefersLight === false) && (theme === 'auto')) || (theme === 'dark')) {
    document.body.classList.toggle('dark-theme', true);
  }
  else {
    document.body.classList.toggle('mixed-theme', true);
  }

= render template: 'layouts/application'
